<view class="container">
  <view class="logo">
    <view class="logo-icon">🌾</view>
    <text class="logo-text">农业零工平台</text>
  </view>

  <!-- 登录方式切换 -->
  <view class="login-tabs">
    <view 
      class="tab-item {{loginType === 'wechat' ? 'active' : ''}}"
      bindtap="switchLoginType"
      data-type="wechat"
    >
      微信登录
    </view>
    <view 
      class="tab-item {{loginType === 'phone' ? 'active' : ''}}"
      bindtap="switchLoginType"
      data-type="phone"
    >
      手机登录
    </view>
  </view>

  <!-- 微信登录 -->
  <view class="login-form" wx:if="{{loginType === 'wechat'}}">
    <button 
      class="login-btn" 
      open-type="getUserProfile"
      bindgetuserprofile="onGetUserProfile"
      bindtap="wxLogin"
      loading="{{loading}}"
      disabled="{{loading}}"
    >
      {{loading ? '登录中...' : '微信一键登录'}}
    </button>
    <text class="error-text" wx:if="{{loginError}}">{{loginError}}</text>
  </view>

  <!-- 手机号登录 -->
  <view class="login-form phone-login" wx:if="{{loginType === 'phone'}}">
    <view class="form-item">
      <text class="label">手机号</text>
      <input
        class="input"
        type="number"
        placeholder="请输入手机号"
        value="{{phone}}"
        bindinput="onPhoneInput"
        maxlength="11"
      />
    </view>

    <view class="form-item">
      <text class="label">验证码</text>
      <view class="verify-code-row">
        <input
          class="input verify-code-input"
          type="number"
          placeholder="请输入验证码"
          value="{{verifyCode}}"
          bindinput="onVerifyCodeInput"
          maxlength="6"
        />
        <button
          class="send-code-btn"
          bindtap="sendVerifyCode"
          disabled="{{sendingCode || countdown > 0}}"
          loading="{{sendingCode}}"
        >
          {{countdown > 0 ? countdown + 's' : '发送验证码'}}
        </button>
      </view>
    </view>

    <button
      class="login-btn"
      bindtap="phoneLogin"
      loading="{{loading}}"
      disabled="{{loading}}"
    >
      {{loading ? '登录中...' : '登录'}}
    </button>
    <text class="error-text" wx:if="{{loginError}}">{{loginError}}</text>
  </view>

  <view class="tips">
    <text>登录即表示同意《用户协议》和《隐私政策》</text>
  </view>
</view>

