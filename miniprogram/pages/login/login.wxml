<view class="login-container">
  <view class="logo">
    <view class="platform-name">农业零工平台</view>
    <view class="platform-subtitle">农业零工平台</view>
  </view>

  <!-- 登录选项 -->
  <view class="login-options">
    <!-- 微信登录（需要授权） -->
    <button 
      class="login-btn wechat-login"
      open-type="getUserProfile"
      bindgetuserprofile="onGetUserProfile"
      bindtap="wxLogin"
      disabled="{{loading}}"
    >
      <view class="icon wechat-icon">💬</view>
      <text>微信登录</text>
    </button>

    <!-- 手机登录 -->
    <button 
      class="login-btn phone-login"
      bindtap="showPhoneLogin"
      disabled="{{loading}}"
    >
      <view class="icon phone-icon">📱</view>
      <text>手机登录</text>
    </button>

    <!-- 微信一键登录（快速登录） -->
    <button 
      class="login-btn wechat-quick"
      open-type="getUserProfile"
      bindgetuserprofile="onGetUserProfile"
      bindtap="wxQuickLogin"
      disabled="{{loading}}"
    >
      <view class="icon wechat-icon-white">💬</view>
      <text>微信一键登录</text>
    </button>
  </view>

  <!-- 手机号登录表单（弹窗或展开） -->
  <view class="phone-login-form {{showPhoneForm ? 'show' : ''}}" wx:if="{{showPhoneForm}}">
    <view class="form-header">
      <text class="form-title">手机号登录</text>
      <view class="close-btn" bindtap="hidePhoneLogin">✕</view>
    </view>
    
    <view class="form-item">
      <text class="label">手机号</text>
      <input
        class="input"
        type="number"
        placeholder="请输入手机号"
        value="{{phone}}"
        bindinput="onPhoneInput"
        maxlength="11"
      />
    </view>

    <view class="form-item">
      <text class="label">验证码</text>
      <view class="verify-code-row">
        <input
          class="input verify-code-input"
          type="number"
          placeholder="请输入验证码"
          value="{{verifyCode}}"
          bindinput="onVerifyCodeInput"
          maxlength="6"
        />
        <button
          class="send-code-btn"
          bindtap="sendVerifyCode"
          disabled="{{sendingCode || countdown > 0}}"
          loading="{{sendingCode}}"
        >
          {{countdown > 0 ? countdown + 's' : '发送验证码'}}
        </button>
      </view>
    </view>

    <button
      class="submit-btn"
      bindtap="phoneLogin"
      loading="{{loading}}"
      disabled="{{loading}}"
    >
      {{loading ? '登录中...' : '登录'}}
    </button>
    
    <text class="error-text" wx:if="{{loginError}}">{{loginError}}</text>
  </view>

  <!-- 用户协议 -->
  <view class="agreement">
    <text>登录即表示同意</text>
    <text class="link" bindtap="viewAgreement">《用户协议》</text>
    <text>和</text>
    <text class="link" bindtap="viewPrivacy">《隐私政策》</text>
  </view>

  <!-- 错误提示 -->
  <view class="error-toast" wx:if="{{errorMessage}}">
    <text>{{errorMessage}}</text>
  </view>
</view>

